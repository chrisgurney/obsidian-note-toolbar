What's new in Note Toolbar v1.26?

_Make sure you've updated to the latest version to get all of these changes._

## New Features ðŸŽ‰

### Text toolbars

<img src="https://raw.githubusercontent.com/chrisgurney/obsidian-note-toolbar/master/docs/images/demo_text_toolbar.gif" width="600"/>

Choose a toolbar in settings: **Toolbars within the app â†’ Selected text**, and it will appear when text is selected.
- Right-click on the toolbar (long-press on mobile) to conveniently change its settings.

#### Styling text toolbars

- Some of the selected toolbar's styles (e.g., `borders`) are applied, while others won't have an effect (e.g., `sticky`).
- Use [Style Settings â†—](https://github.com/mgmeyers/obsidian-style-settings) to further customize: item colors + sizes, border colors + radius, maximum width, and the toolbar's shadow.
- To set the maximum width of text toolbars:
  - using Style Settings, look for the **Max width on desktop/tablet** settings; OR
  - override these variables in a CSS snippet (defaults shown below):
```css
--cg-nt-tbar-text-max-width-desktop: 900px;
--cg-nt-tbar-text-max-width-phone: calc(100vw - 32px);
--cg-nt-tbar-text-max-width-tablet: 650px;
```

#### `Focus in text toolbar` command

- The command `Note Toolbar: Focus in text toolbar` puts keyboard focus in the text toolbar.

> [!TIP]
> If the toolbar is not already displayed, this command will show the text toolbar at the current cursor position, and place focus in it. This provides yet another way to access frequently-used tools.

#### Selection variable

- A new `{{selection}}` [variable](https://github.com/chrisgurney/obsidian-note-toolbar/wiki/Variables) (for labels, tooltips, and URIs) is populated with the currently selected text, or with the word at the cursor position. Encode the selected text via `{{encode:selection}}` for inclusion in URIs.
- For example, search for the current selection with a [URI item](https://github.com/chrisgurney/obsidian-note-toolbar/wiki/URI-items) that has this URI: `obsidian://search?query={{encode:selection}}`

#### Known issues

- Toolbars with breaks will have empty gaps on the left and/or right sides. You will have to remove breaks and use the **Max width** [Style Setting â†—](https://github.com/mgmeyers/obsidian-style-settings) (or add a CSS snippet) to resolve this.

_Thanks to @daxmonson and others who [suggested this feature](https://github.com/chrisgurney/obsidian-note-toolbar/discussions/120)._

### Tab bar position

<img src="https://raw.githubusercontent.com/chrisgurney/obsidian-note-toolbar/master/docs/images/demo_pos_tabbar.png" width="600"/>

Select the *Tab bar* position to put the toolbar at the top of the editor, next to the _Reading / Preview mode_ and _File menu_ buttons.

- Right-click on the button (long-press on mobile) to change its settings.
- Change the icon shown under Note Toolbar's settings: **Other â†’ Icon**.

_Thank you @Dopairym for [the suggestion](https://github.com/chrisgurney/obsidian-note-toolbar/discussions/379)!_

### Toggle a Base's toolbar

Use the `Toggle Base toolbars` command to show/hide any native Base toolbars, including in embedded Bases.

<img src="https://raw.githubusercontent.com/chrisgurney/obsidian-note-toolbar/master/docs/images/demo_toggle_base_tbar.gif" width="600"/>

## Improvements ðŸš€

- Note Toolbar's commands now only show up if they're supposed to in the command palette, given the current context. For example, when looking at a non-markdown file, the `Toggle properties` command will not be available.
- [Cupertino theme â†—](https://github.com/aaaaalexis/obsidian-cupertino): Liquid Glass effect on `button items`. _Thanks @aaaaalexis!_
- If the **Disable if not available** advanced option is set for a command item, and the command is unavailable in the current context (or the command doesn't exist) it is now disabled, instead of being completely hidden.
  - For example, use this to set the _Bold_ command as disabled when in the _Reading_ view.
  - These items will still be completely hidden in menus.
  - _Thank you @alexey-zaharchenko for [suggesting this behavior](https://github.com/chrisgurney/obsidian-note-toolbar/discussions/386) in the first place._
- The Item Suggester (displayed when using _Add item..._ for example) now has more prominent _Browse Gallery..._ links, such as when there's no search results.
- Settings: Note Toolbar's main settings has [a new section](https://github.com/chrisgurney/obsidian-note-toolbar/wiki/Toolbars-within-the-app) that collects the options for toolbars that can accessed across the app (i.e., outside of notes).
- Settings: In the main settings tab, all major settings sections are now collapsible, and it remembers what you had previously collapsed.
- Settings: Clicking/Tapping on the headers of collapsible settings sections now also toggles the visibility of that section.
- Chinese localization updates by @Moyf

## Fixes ðŸ› ï¸

- When the toolbar was placed at the top position, Obsidian's header (displaying the filename and buttons) kept getting squished; it should now retain its minimum height.
- Gallery updates for [Obsidian 1.10.3 â†—](https://obsidian.md/changelog/2025-11-11-desktop-v1.10.3/):
  - Removed light/dark mode items that used commands no longer available.
  - Updated toggle light/dark item to use new Toggle light/dark command.
  - Updated items to use new Indent / Unindent commands that are available on all platforms.
- Output of some script errors was missing newlines.
- Settings: Style menu options should now be alphabetized, regardless of language.
- Settings: The main settings UI was not scrolling back to the previous position, after a toolbar settings modal was closed.
- Settings: Fixed another case where the toolbar's name was being encoded on toolbar settings display.
- Baseline, Cupertino, Minimal, Velocity themes: Sticky toolbars were getting cut off when scrolling them to the top. [#413](https://github.com/chrisgurney/obsidian-note-toolbar/issues/413) _Thank you @MG240!_
- Baseline, Cupertino themes: Floating button was overlapping the navigation bar on phones. [#424](https://github.com/chrisgurney/obsidian-note-toolbar/issues/424) _Thank you @dlangendorf!_
- Cupertino theme: The dark mode background color was incorrect on mobile.
- Cupertino theme: Note Toolbar [Output callouts](https://github.com/chrisgurney/obsidian-note-toolbar/wiki/Executing-scripts#output-callout) were being styled when the theme was active.

## API

### `ntb.app`

Access the app instance using `ntb.app`:

```ts
const currentFile = ntb.app.workspace.getActiveFile();
new Notice(currentFile.name);
```

> [!note]
> The global `app` instance will continue to work, but per Obsidian's [plugin guidelines](https://docs.obsidian.md/Plugins/Releasing/Plugin+guidelines#Avoid+using+global+app+instance) "[the] global app object is intended for debugging purposes and might be removed in the future."

### `ntb.getSelection()`

Returns the text that is currently selected, the word at the cursor's position, or an empty string otherwise.

### `ntb.o`

Provides a reference to the Obsidian API module, for accessing [Obsidian's classes](https://github.com/obsidianmd/obsidian-api/blob/master/obsidian.d.ts) and utilities from scripts.

```ts
// get the current markdown view
const view = app.workspace.getActiveViewOfType(ntb.o.MarkdownView);
```

_Thanks to @Moyf for [the suggestion](https://github.com/chrisgurney/obsidian-note-toolbar/discussions/418)!_

### `ntb.setSelection()`

Replaces the selected text, or the word at the cursor position, with the provided string.

```ts
// makes the selected text or current word red
ntb.setSelection(`<span style="color: var(--color-red)">${ntb.getSelection()}</span>`);
```

## Previous releases

[`v1.25`](https://github.com/chrisgurney/obsidian-note-toolbar/blob/master/docs/releases/en/1.25.md) Lock Note Toolbar Callouts; various quality of life improvements and fixes

[`v1.24`](https://github.com/chrisgurney/obsidian-note-toolbar/blob/master/docs/releases/en/1.24.md) Replace the new tab view; support for Bases, Excalidraw, and other file types; hide commands if not available

[`v1.23`](https://github.com/chrisgurney/obsidian-note-toolbar/blob/master/docs/releases/en/1.23.md) Set focus in editor after executing commands; Hidden props stay hidden; External links can be opened in other views
